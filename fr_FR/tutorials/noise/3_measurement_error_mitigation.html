


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="fr-FR" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="fr-FR" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Atténuation des Erreurs de Mesure &mdash; Documentation Qiskit 0.27.0</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!-- <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" /> -->
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/jupyter-sphinx.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/thebelab.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme-override.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/panels-variables.ade9f9d55df9d2893fc676ecd59723a1.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Rechercher" href="../../search.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<div class="container-fluid header-holder tutorials-header" id="header-holder">
  <div class="container">
    <div class="header-container">
      <a class="header-logo" href="https://qiskit.org/" aria-label="PyTorch"></a>

      <div class="main-menu">
        <ul>
          <li>
            <a href="../../getting_started.html">Getting started</a>
          </li>

          <li>
            <a href="../../tutorials.html">Tutorials</a>
          </li>

          <li>
            <a href="https://qiskit.org/documentation/partners/" target="_blank">Providers</a>
          </li>

          <li>
            <div id="resourcesDropdownButton" data-toggle="resources-dropdown" class="resources-dropdown">
              <a class="resource-option with-down-orange-arrow">
                Applications
              </a>
              <div class="resources-dropdown-menu">
                <a class="nav-dropdown-item" href="https://qiskit.org/documentation/machine-learning/">
                  <span class="dropdown-title">Machine learning</span>
                  <p>QSVM, VQC (Variational Quantum Classifier), and QGAN (Quantum Generative
                    Adversarial Network) algorithms.</p>
                </a>
                <a class="nav-dropdown-item" href="https://qiskit.org/documentation/nature/">
                  <span class="dropdown-title">Nature</span>
                  <p>Quantum applications in chemistry, physics, and biology.</p>
                </a>
                <a class="nav-dropdown-item" href="https://qiskit.org/documentation/finance/">
                  <span class="dropdown-title">Finance</span>
                  <p>Uncertainty components for stock/securities problems, Ising translators for
                    portfolio optimizations and data providers to source real or random data.</p>
                </a>
                <a class="nav-dropdown-item" href="https://qiskit.org/documentation/optimization/">
                  <span class="dropdown-title">Optimization</span>
                  <p>High-level optimization problems that are ready to
                    run on simulators and real quantum devices</p>
                </a>
              </div>
          </li>

          <li>
            <div id="resourcesDropdownButton" data-toggle="resources-dropdown" class="resources-dropdown">
              <a class="resource-option with-down-orange-arrow">
                Resources
              </a>
              <div class="resources-dropdown-menu">
                <a class="doc-dropdown-option nav-dropdown-item" href="https://qiskit.slack.com">
                  <span class="dropdown-title">Slack support</span>
                  <p></p>
                </a>
                <a class="doc-dropdown-option nav-dropdown-item" href="https://qiskit.org/textbook">
                  <span class="dropdown-title">Qiskit Textbook</span>
                  <p></p>
                </a>
                <a class="doc-dropdown-option nav-dropdown-item" href="https://qiskit.org/events">
                  <span class="dropdown-title">Qiskit events</span>
                  <p></p>
                </a>
            </div>
          </li>
          <li>
            <a href="https://github.com/Qiskit/" target="_blank">Github</a>
          </li>
        </ul>
      </div>

      <a class="main-menu-open-button" href="#" data-behavior="open-mobile-menu"></a>
    </div>

  </div>
</div>


<body class="pytorch-body">

   

    

    <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="rst-current-version-label">French</span>
    <span class="rst-versions-dropdown-icon"></span>
  </span>
  <div class="rst-other-versions">
    
    <dl>
      <dt>Langues</dt>
      
        <dd><a class="version" href="/documentation/tutorials/noise/3_measurement_error_mitigation.html">English</a></dd>
      
        <dd><a class="version" href="/documentation/locale/ja_JP/tutorials/noise/3_measurement_error_mitigation.html">Japanese</a></dd>
      
        <dd><a class="version" href="/documentation/locale/de_DE/tutorials/noise/3_measurement_error_mitigation.html">German</a></dd>
      
        <dd><a class="version" href="/documentation/locale/ko_KR/tutorials/noise/3_measurement_error_mitigation.html">Korean</a></dd>
      
        <dd><a class="version" href="/documentation/locale/pt_BR/tutorials/noise/3_measurement_error_mitigation.html">Portuguese, Brazilian</a></dd>
      
        <dd><a class="version" href="/documentation/locale/fr_FR/tutorials/noise/3_measurement_error_mitigation.html">French</a></dd>
      
        <dd><a class="version" href="/documentation/locale/ta_IN/tutorials/noise/3_measurement_error_mitigation.html">Tamil</a></dd>
      
    </dl>
    
    <dl>
      <dt>Previous Releases</dt>
      
        <dd><a class="version" href="/documentation/stable/0.24/index.html">0.24</a></dd>
      
        <dd><a class="version" href="/documentation/stable/0.25/index.html">0.25</a></dd>
      
        <dd><a class="version" href="/documentation/stable/0.26/index.html">0.26</a></dd>
      
    </dl>
  </div>
  <script>
    jQuery('.version').click((evt) => {
      const hash = window.location.hash
      const complete_url = evt.target.href + hash
      window.location = complete_url
      evt.preventDefault()
    })
  </script>
</div>

    <div class="table-of-contents-link-wrapper">
      <span>Table of Contents</span>
      <a href="#" class="toggle-table-of-contents" data-behavior="toggle-table-of-contents"></a>
    </div>

    <nav data-toggle="wy-nav-shift" class="pytorch-left-menu" id="pytorch-left-menu">
      <div class="pytorch-side-scroll">
        <div class="pytorch-menu pytorch-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          <div class="pytorch-left-menu-search">
            

            
              
              
            

            


  


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

            
          </div>

          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Documentation homepage</a></li>
</ul>
<p><span class="caption-text">Frontmatter</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../qc_intro.html">L’informatique quantique en bref</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../intro_tutorial1.html">Introduction to Qiskit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing_to_qiskit.html">Contribuer à Qiskit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration.html">Local Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">Frequently Asked Questions</a></li>
</ul>
<p><span class="caption-text">Libraries</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/circuit_library.html">Circuit Library</a></li>
</ul>
<p><span class="caption-text">API References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/terra.html">Qiskit (Terra)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/aer.html">Qiskit Simulator (Aer)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/ignis.html">Qiskit Experiments (Ignis)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/aqua.html">Qiskit Application Modules (Aqua)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/ibmq-provider.html">Qiskit IBM Quantum (Provider)</a></li>
</ul>
<p><span class="caption-text">Qiskit Applications (Aqua) Migration Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../aqua_migration.html">Qiskit Applications (Aqua) Migration Guide</a></li>
</ul>
<p><span class="caption-text">Troubleshooting</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://quantum-computing.ibm.com/lab/docs/iql/manage/errors">IBM Quantum API error codes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <div class="pytorch-container">
      <div class="pytorch-page-level-bar" id="pytorch-page-level-bar">
        <div class="pytorch-breadcrumbs-wrapper">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="pytorch-breadcrumbs">
    
      <li>
        <a href="../../index.html">
          
            Docs
          
        </a> &gt;
      </li>

        
      <li>Atténuation des Erreurs de Mesure</li>
    
    
      <li class="pytorch-breadcrumbs-aside">
        
            
            <a href="../../_sources/tutorials/noise/3_measurement_error_mitigation.ipynb" rel="nofollow"><img src="../../_static/images/view-page-source-icon.svg"></a>
          
        
      </li>
    
  </ul>

  
</div>
        </div>

        <div class="pytorch-shortcuts-wrapper" id="pytorch-shortcuts-wrapper">
          Shortcuts
        </div>
      </div>

      <section data-toggle="wy-nav-shift" id="pytorch-content-wrap" class="pytorch-content-wrap">
        <div class="pytorch-content-left">
          
          <div class="rst-content style-external-links">
          
            <div role="main" class="main-content" itemscope="itemscope" itemtype="http://schema.org/Article">
             <article itemprop="articleBody" id="pytorch-article" class="pytorch-article">
              
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Cette page a été générée à partir de <a class="reference external" href="https://github.com/Qiskit/qiskit-tutorials/blob/master/tutorials/noise/3_measurement_error_mitigation.ipynb">tutorials/noise/3_measurement_error_mitigation.ipynb</a>.</p>
</div>
<section id="Atténuation-des-Erreurs-de-Mesure">
<h1>Atténuation des Erreurs de Mesure<a class="headerlink" href="#Atténuation-des-Erreurs-de-Mesure" title="Lien permanent vers ce titre">¶</a></h1>
<section id="Introduction">
<h2>Introduction<a class="headerlink" href="#Introduction" title="Lien permanent vers ce titre">¶</a></h2>
<p>La calibration de mesure est utilisée pour atténuer les erreurs de mesure. L’idée principale est de préparer tous les états d’entrée de base de <span class="math notranslate nohighlight">\(2^n\)</span> et de calculer la probabilité de comptage dans les autres états de base. À partir de ces étalonnages, il est possible de corriger les résultats moyens d’un autre test d’intérêt. Ce bloc-notes donne des exemples d’utilisation du module <code class="docutils literal notranslate"><span class="pre">ignis.mitigation.measurement</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Import general libraries (needed for functions)</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># Import Qiskit classes</span>
<span class="kn">import</span> <span class="nn">qiskit</span>
<span class="kn">from</span> <span class="nn">qiskit</span> <span class="kn">import</span> <span class="n">QuantumRegister</span><span class="p">,</span> <span class="n">QuantumCircuit</span><span class="p">,</span> <span class="n">ClassicalRegister</span><span class="p">,</span> <span class="n">Aer</span>
<span class="kn">from</span> <span class="nn">qiskit.providers.aer</span> <span class="kn">import</span> <span class="n">noise</span>
<span class="kn">from</span> <span class="nn">qiskit.tools.visualization</span> <span class="kn">import</span> <span class="n">plot_histogram</span>

<span class="c1"># Import measurement calibration functions</span>
<span class="kn">from</span> <span class="nn">qiskit.ignis.mitigation.measurement</span> <span class="kn">import</span> <span class="p">(</span><span class="n">complete_meas_cal</span><span class="p">,</span> <span class="n">tensored_meas_cal</span><span class="p">,</span>
                                                 <span class="n">CompleteMeasFitter</span><span class="p">,</span> <span class="n">TensoredMeasFitter</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="Exemple-des-Matrices-de-Calibration-pour-3-Qubits">
<h2>Exemple des Matrices de Calibration pour 3 Qubits<a class="headerlink" href="#Exemple-des-Matrices-de-Calibration-pour-3-Qubits" title="Lien permanent vers ce titre">¶</a></h2>
<p>Supposons que nous voulions générer une matrice d’étalonnage pour les 3 qubits Q2, Q3 et Q4 dans un registre Quantum 5 qubit [Q0,Q1,Q2,Q3,Q4].</p>
<p>Puisque nous avons 3 qubits, il y a <span class="math notranslate nohighlight">\(2^3=8\)</span> états quantiques possibles.</p>
</section>
<section id="Génération-de-Circuits-d'Etalonnage-de-Mesure">
<h2>Génération de Circuits d’Etalonnage de Mesure<a class="headerlink" href="#Génération-de-Circuits-d'Etalonnage-de-Mesure" title="Lien permanent vers ce titre">¶</a></h2>
<p>D’abord, nous générons une liste de circuits d’étalonnage de mesure pour l’espace complet de Hilbert. Chaque circuit crée un état de base. S’il y a <span class="math notranslate nohighlight">\(n=3\)</span> qubits, alors nous obtenons <span class="math notranslate nohighlight">\(2^3=8\)</span> circuits de calibration.</p>
<p>La fonction suivante <strong>complete_meas_cal</strong> renvoie une liste <strong>meas_calibs</strong> des objets <code class="docutils literal notranslate"><span class="pre">QuantumCircuit</span></code> contenant les circuits d’étalonnage, et une liste <strong>state_labels</strong> des étiquettes d’état d’étalonnage.</p>
<p>L’entrée de cette fonction peut être donnée dans l’une des trois formes suivantes:</p>
<ul class="simple">
<li><p>** qubit_list:** Une liste de qubits sur lesquels effectuer la correction de mesure sur, ou :</p></li>
<li><p><strong>qr (QuantumRegister):</strong> Un registre quantique, ou:</p></li>
<li><p><strong>cr (ClassicalRegister):</strong> Un registre classique.</p></li>
</ul>
<p>En outre, on peut fournir une chaîne de caractères <strong>cerclabel</strong>, qui est ajoutée au début des noms de circuits pour une identification unique.</p>
<p>Par exemple, dans notre cas, l’entrée est un <code class="docutils literal notranslate"><span class="pre">QuantumRegister</span></code> à 5-qubit contenant les qubits Q2,Q3,Q4 :</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Generate the calibration circuits</span>
<span class="n">qr</span> <span class="o">=</span> <span class="n">qiskit</span><span class="o">.</span><span class="n">QuantumRegister</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">qubit_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="n">meas_calibs</span><span class="p">,</span> <span class="n">state_labels</span> <span class="o">=</span> <span class="n">complete_meas_cal</span><span class="p">(</span><span class="n">qubit_list</span><span class="o">=</span><span class="n">qubit_list</span><span class="p">,</span> <span class="n">qr</span><span class="o">=</span><span class="n">qr</span><span class="p">,</span> <span class="n">circlabel</span><span class="o">=</span><span class="s1">&#39;mcal&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Imprime les étiquettes d’état <span class="math notranslate nohighlight">\(2^3=8\)</span> (pour les 3 qubits Q2,Q3,Q4):</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">state_labels</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[&#39;000&#39;, &#39;001&#39;, &#39;010&#39;, &#39;011&#39;, &#39;100&#39;, &#39;101&#39;, &#39;110&#39;, &#39;111&#39;]
</pre></div></div>
</div>
</section>
<section id="Calcul-de-la-Matrice-d'Etalonnage">
<h2>Calcul de la Matrice d’Etalonnage<a class="headerlink" href="#Calcul-de-la-Matrice-d'Etalonnage" title="Lien permanent vers ce titre">¶</a></h2>
<p>Si nous n’appliquons aucun bruit, alors la matrice d’étalonnage devrait être la matrice d’identité <span class="math notranslate nohighlight">\(8 \times 8\)</span>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Execute the calibration circuits without noise</span>
<span class="n">backend</span> <span class="o">=</span> <span class="n">qiskit</span><span class="o">.</span><span class="n">Aer</span><span class="o">.</span><span class="n">get_backend</span><span class="p">(</span><span class="s1">&#39;qasm_simulator&#39;</span><span class="p">)</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">qiskit</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">meas_calibs</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">cal_results</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># The calibration matrix without noise is the identity matrix</span>
<span class="n">meas_fitter</span> <span class="o">=</span> <span class="n">CompleteMeasFitter</span><span class="p">(</span><span class="n">cal_results</span><span class="p">,</span> <span class="n">state_labels</span><span class="p">,</span> <span class="n">circlabel</span><span class="o">=</span><span class="s1">&#39;mcal&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">meas_fitter</span><span class="o">.</span><span class="n">cal_matrix</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[1. 0. 0. 0. 0. 0. 0. 0.]
 [0. 1. 0. 0. 0. 0. 0. 0.]
 [0. 0. 1. 0. 0. 0. 0. 0.]
 [0. 0. 0. 1. 0. 0. 0. 0.]
 [0. 0. 0. 0. 1. 0. 0. 0.]
 [0. 0. 0. 0. 0. 1. 0. 0.]
 [0. 0. 0. 0. 0. 0. 1. 0.]
 [0. 0. 0. 0. 0. 0. 0. 1.]]
</pre></div></div>
</div>
<p>Supposons que nous appliquions un modèle de bruit de Qiskit Aer aux 5 qubits, alors la matrice d’étalonnage aura la plus grande partie de ses valeurs sur la diagonale principale, avec un “bruit” supplémentaire.</p>
<p>Alternativement, nous pouvons exécuter les circuits d’étalonnage à l’aide d’un fournisseur de service IBMQ.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Generate a noise model for the 5 qubits</span>
<span class="n">noise_model</span> <span class="o">=</span> <span class="n">noise</span><span class="o">.</span><span class="n">NoiseModel</span><span class="p">()</span>
<span class="k">for</span> <span class="n">qi</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">read_err</span> <span class="o">=</span> <span class="n">noise</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">readout_error</span><span class="o">.</span><span class="n">ReadoutError</span><span class="p">([[</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">],[</span><span class="mf">0.25</span><span class="p">,</span><span class="mf">0.75</span><span class="p">]])</span>
    <span class="n">noise_model</span><span class="o">.</span><span class="n">add_readout_error</span><span class="p">(</span><span class="n">read_err</span><span class="p">,</span> <span class="p">[</span><span class="n">qi</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Execute the calibration circuits</span>
<span class="n">backend</span> <span class="o">=</span> <span class="n">qiskit</span><span class="o">.</span><span class="n">Aer</span><span class="o">.</span><span class="n">get_backend</span><span class="p">(</span><span class="s1">&#39;qasm_simulator&#39;</span><span class="p">)</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">qiskit</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">meas_calibs</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">noise_model</span><span class="o">=</span><span class="n">noise_model</span><span class="p">)</span>
<span class="n">cal_results</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Calculate the calibration matrix with the noise model</span>
<span class="n">meas_fitter</span> <span class="o">=</span> <span class="n">CompleteMeasFitter</span><span class="p">(</span><span class="n">cal_results</span><span class="p">,</span> <span class="n">state_labels</span><span class="p">,</span> <span class="n">qubit_list</span><span class="o">=</span><span class="n">qubit_list</span><span class="p">,</span> <span class="n">circlabel</span><span class="o">=</span><span class="s1">&#39;mcal&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">meas_fitter</span><span class="o">.</span><span class="n">cal_matrix</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[[0.736 0.22  0.212 0.063 0.184 0.059 0.05  0.012]
 [0.073 0.572 0.03  0.17  0.027 0.174 0.011 0.047]
 [0.083 0.029 0.589 0.187 0.034 0.006 0.168 0.044]
 [0.007 0.074 0.069 0.477 0.004 0.019 0.022 0.13 ]
 [0.081 0.024 0.017 0.005 0.609 0.17  0.155 0.051]
 [0.008 0.068 0.002 0.015 0.058 0.488 0.013 0.147]
 [0.01  0.004 0.071 0.028 0.078 0.024 0.534 0.132]
 [0.002 0.009 0.01  0.055 0.006 0.06  0.047 0.437]]
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Plot the calibration matrix</span>
<span class="n">meas_fitter</span><span class="o">.</span><span class="n">plot_calibration</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_noise_3_measurement_error_mitigation_17_0.png" src="../../_images/tutorials_noise_3_measurement_error_mitigation_17_0.png" />
</div>
</div>
</section>
<section id="Analyse-des-Résultats">
<h2>Analyse des Résultats<a class="headerlink" href="#Analyse-des-Résultats" title="Lien permanent vers ce titre">¶</a></h2>
<p>Nous aimerions calculer la fidélité totale de la mesure et la fidélité de la mesure pour un qubit spécifique, par exemple, Q0.</p>
<p>Puisque les éléments sur la diagonale de la matrice d’étalonnage sont les probabilités de mesure de l’état “x” étant donné la préparation de l’état “x”, alors la trace de cette matrice correspond à la fidélité d’affectation moyenne.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># What is the measurement fidelity?</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Average Measurement Fidelity: </span><span class="si">%f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">meas_fitter</span><span class="o">.</span><span class="n">readout_fidelity</span><span class="p">())</span>

<span class="c1"># What is the measurement fidelity of Q0?</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Average Measurement Fidelity of Q0: </span><span class="si">%f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">meas_fitter</span><span class="o">.</span><span class="n">readout_fidelity</span><span class="p">(</span>
    <span class="n">label_list</span> <span class="o">=</span> <span class="p">[[</span><span class="s1">&#39;000&#39;</span><span class="p">,</span><span class="s1">&#39;001&#39;</span><span class="p">,</span><span class="s1">&#39;010&#39;</span><span class="p">,</span><span class="s1">&#39;011&#39;</span><span class="p">],[</span><span class="s1">&#39;100&#39;</span><span class="p">,</span><span class="s1">&#39;101&#39;</span><span class="p">,</span><span class="s1">&#39;110&#39;</span><span class="p">,</span><span class="s1">&#39;111&#39;</span><span class="p">]]))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Average Measurement Fidelity: 0.555250
Average Measurement Fidelity of Q0: 0.825000
</pre></div></div>
</div>
</section>
<section id="Application-de-l'Etalonnage">
<h2>Application de l’Etalonnage<a class="headerlink" href="#Application-de-l'Etalonnage" title="Lien permanent vers ce titre">¶</a></h2>
<p>Nous effectuons maintenant un autre test et corrigons les résultats mesurés.</p>
</section>
<section id="Corriger-le-Bruit-de-Mesure-sur-un-Etat-GHZ-3Q">
<h2>Corriger le Bruit de Mesure sur un Etat GHZ 3Q<a class="headerlink" href="#Corriger-le-Bruit-de-Mesure-sur-un-Etat-GHZ-3Q" title="Lien permanent vers ce titre">¶</a></h2>
<p>À titre d’exemple, nous commençons avec l’état GHZ 3-qubit sur les qubits Q2,Q3,Q4 :</p>
<div class="math notranslate nohighlight">
\[\mid GHZ \rangle = \frac{\mid{000} \rangle + \mid{111} \rangle}{\sqrt{2}}\]</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Make a 3Q GHZ state</span>
<span class="n">cr</span> <span class="o">=</span> <span class="n">ClassicalRegister</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">ghz</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="n">qr</span><span class="p">,</span> <span class="n">cr</span><span class="p">)</span>
<span class="n">ghz</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="n">qr</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="n">ghz</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="n">qr</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">qr</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<span class="n">ghz</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="n">qr</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">qr</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
<span class="n">ghz</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">qr</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">cr</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">ghz</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">qr</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="n">cr</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">ghz</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">qr</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span><span class="n">cr</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;qiskit.circuit.instructionset.InstructionSet at 0x7f869dce3040&gt;
</pre></div></div>
</div>
<p>Nous exécutons maintenant les circuits d’étalonnage (avec le modèle de bruit ci-dessus):</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">job</span> <span class="o">=</span> <span class="n">qiskit</span><span class="o">.</span><span class="n">execute</span><span class="p">([</span><span class="n">ghz</span><span class="p">],</span> <span class="n">backend</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">noise_model</span><span class="o">=</span><span class="n">noise_model</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
</pre></div>
</div>
</div>
<p>Nous calculons maintenant les résultats sans aucune atténuation d’erreur et avec l’atténuation, à savoir après avoir appliqué la matrice d’étalonnage aux résultats.</p>
<p>Il y a deux méthodes d’ajustement pour appliquer l’étalonnage (si aucune méthode n’est définie, alors “least_squares” est utilisé). - <strong>“pseudo_inverse”</strong>, qui est une inversion directe de la matrice d’étalonnage, - <strong>“least_squares”</strong>, qui contraint à avoir des probabilités physiques.</p>
<p>Les données brutes à corriger peuvent être données sous différentes formes:</p>
<ul class="simple">
<li><p>Forme 1: Un dictionnaire de comptes de results.get_counts,</p></li>
<li><p>Forme 2: liste des comptages de longueur=len(state_labels),</p></li>
<li><p>Forme 3: Une liste de comptages de longueur=M*len(state_labels) où M est un entier (par exemple pour l’utilisation avec les données de tomographie),</p></li>
<li><p>Forme 4: Un Résultat qiskit (par exemple les résultats ci-dessus).</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Results without mitigation</span>
<span class="n">raw_counts</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">get_counts</span><span class="p">()</span>

<span class="c1"># Get the filter object</span>
<span class="n">meas_filter</span> <span class="o">=</span> <span class="n">meas_fitter</span><span class="o">.</span><span class="n">filter</span>

<span class="c1"># Results with mitigation</span>
<span class="n">mitigated_results</span> <span class="o">=</span> <span class="n">meas_filter</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="n">mitigated_counts</span> <span class="o">=</span> <span class="n">mitigated_results</span><span class="o">.</span><span class="n">get_counts</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Nous pouvons maintenant tracer les résultats avec et sans atténuation des erreurs:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">qiskit.tools.visualization</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">plot_histogram</span><span class="p">([</span><span class="n">raw_counts</span><span class="p">,</span> <span class="n">mitigated_counts</span><span class="p">],</span> <span class="n">legend</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;raw&#39;</span><span class="p">,</span> <span class="s1">&#39;mitigated&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_noise_3_measurement_error_mitigation_27_0.png" src="../../_images/tutorials_noise_3_measurement_error_mitigation_27_0.png" />
</div>
</div>
<section id="Application-à-un-sous-ensemble-réduit-de-qubits">
<h3>Application à un sous-ensemble réduit de qubits<a class="headerlink" href="#Application-à-un-sous-ensemble-réduit-de-qubits" title="Lien permanent vers ce titre">¶</a></h3>
<p>Considérons maintenant que nous voulons corriger un état Bell de 2Q, mais nous avons la matrice d’étalonnage 3Q. Nous pouvons réduire la matrice et construire un nouvel objet d’atténuation.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Make a 2Q Bell state between Q2 and Q4</span>
<span class="n">cr</span> <span class="o">=</span> <span class="n">ClassicalRegister</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">bell</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="n">qr</span><span class="p">,</span> <span class="n">cr</span><span class="p">)</span>
<span class="n">bell</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="n">qr</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="n">bell</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="n">qr</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">qr</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
<span class="n">bell</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">qr</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">cr</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">bell</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">qr</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span><span class="n">cr</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;qiskit.circuit.instructionset.InstructionSet at 0x7f869dd5be80&gt;
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">job</span> <span class="o">=</span> <span class="n">qiskit</span><span class="o">.</span><span class="n">execute</span><span class="p">([</span><span class="n">bell</span><span class="p">],</span> <span class="n">backend</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">noise_model</span><span class="o">=</span><span class="n">noise_model</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">#build a fitter from the subset</span>
<span class="n">meas_fitter_sub</span> <span class="o">=</span> <span class="n">meas_fitter</span><span class="o">.</span><span class="n">subset_fitter</span><span class="p">(</span><span class="n">qubit_sublist</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">#The calibration matrix is now in the space Q2/Q4</span>
<span class="n">meas_fitter_sub</span><span class="o">.</span><span class="n">cal_matrix</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([[0.81  , 0.2495, 0.218 , 0.0605],
       [0.0895, 0.6465, 0.032 , 0.185 ],
       [0.0895, 0.0305, 0.688 , 0.1885],
       [0.011 , 0.0735, 0.062 , 0.566 ]])
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Results without mitigation</span>
<span class="n">raw_counts</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">get_counts</span><span class="p">()</span>

<span class="c1"># Get the filter object</span>
<span class="n">meas_filter_sub</span> <span class="o">=</span> <span class="n">meas_fitter_sub</span><span class="o">.</span><span class="n">filter</span>

<span class="c1"># Results with mitigation</span>
<span class="n">mitigated_results</span> <span class="o">=</span> <span class="n">meas_filter_sub</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="n">mitigated_counts</span> <span class="o">=</span> <span class="n">mitigated_results</span><span class="o">.</span><span class="n">get_counts</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="kn">from</span> <span class="nn">qiskit.tools.visualization</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">plot_histogram</span><span class="p">([</span><span class="n">raw_counts</span><span class="p">,</span> <span class="n">mitigated_counts</span><span class="p">],</span> <span class="n">legend</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;raw&#39;</span><span class="p">,</span> <span class="s1">&#39;mitigated&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_noise_3_measurement_error_mitigation_34_0.png" src="../../_images/tutorials_noise_3_measurement_error_mitigation_34_0.png" />
</div>
</div>
</section>
</section>
<section id="Mitigation-tendue">
<h2>Mitigation tendue<a class="headerlink" href="#Mitigation-tendue" title="Lien permanent vers ce titre">¶</a></h2>
<p>La calibration peut être simplifiée si l’erreur est connue pour être locale. Par « erreur locale », nous entendons que l’erreur peut être localisée à des sous-ensembles de qubits. Dans ce cas, moins de <span class="math notranslate nohighlight">\(2^n\)</span> états sont nécessaires pour le calcul de la matrice d’étalonnage.</p>
<p>Supposons que l’erreur agit localement sur qubit 2 et la paire de qubits 3 et 4. Construire les circuits d’étalonnage en utilisant la fonction <code class="docutils literal notranslate"><span class="pre">tensored_meas_cal</span></code>. Contrairement au précédent, nous avons besoin de diviser explicitement la liste de qubit en des sous régions.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Generate the calibration circuits</span>
<span class="n">qr</span> <span class="o">=</span> <span class="n">qiskit</span><span class="o">.</span><span class="n">QuantumRegister</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">mit_pattern</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">2</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]]</span>
<span class="n">meas_calibs</span><span class="p">,</span> <span class="n">state_labels</span> <span class="o">=</span> <span class="n">tensored_meas_cal</span><span class="p">(</span><span class="n">mit_pattern</span><span class="o">=</span><span class="n">mit_pattern</span><span class="p">,</span> <span class="n">qr</span><span class="o">=</span><span class="n">qr</span><span class="p">,</span> <span class="n">circlabel</span><span class="o">=</span><span class="s1">&#39;mcal&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Nous récupeons maintenant les noms des circuits générés. Notez que dans chaque étiquette (de longueur 3), le bit le moins significatif correspond au qubit 2, le bit du milieu correspond au qubit 3, et le bit le plus significatif correspond au qubit 4.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">circ</span> <span class="ow">in</span> <span class="n">meas_calibs</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">circ</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
mcalcal_000
mcalcal_010
mcalcal_101
mcalcal_111
</pre></div></div>
</div>
<p>A propos des noms des circuits, nous voyons qu’il n’y a que quatre circuits, au lieu de huit. Le nombre total de circuits requis est <span class="math notranslate nohighlight">\(2^m\)</span> où <span class="math notranslate nohighlight">\(m\)</span> est le nombre de qubits dans le sous-ensemble cible (ici <span class="math notranslate nohighlight">\(m=2\)</span>).</p>
<p>Chaque état de base des qubits 3 et 4 apparaît exactement une fois. Seuls deux états de base sont requis pour le qubit 2, de sorte qu’ils sont répartis équitablement entre les quatre tests. Par exemple, l’état “0” du qubit 2 apparaît dans les libellés d’état “000” et “010”.</p>
<p>Nous exécutons maintenant les circuits d’étalonnage sur un simulateur Aer, en utilisant le même modèle de bruit qu’auparavant. Ce bruit est en fait local aux qubits 3 et 4 séparément, mais supposons que nous ne le savons pas, et que nous savons seulement qu’il est local pour le qubit 2.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Generate a noise model for the 5 qubits</span>
<span class="n">noise_model</span> <span class="o">=</span> <span class="n">noise</span><span class="o">.</span><span class="n">NoiseModel</span><span class="p">()</span>
<span class="k">for</span> <span class="n">qi</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">read_err</span> <span class="o">=</span> <span class="n">noise</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">readout_error</span><span class="o">.</span><span class="n">ReadoutError</span><span class="p">([[</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">],[</span><span class="mf">0.25</span><span class="p">,</span><span class="mf">0.75</span><span class="p">]])</span>
    <span class="n">noise_model</span><span class="o">.</span><span class="n">add_readout_error</span><span class="p">(</span><span class="n">read_err</span><span class="p">,</span> <span class="p">[</span><span class="n">qi</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Execute the calibration circuits</span>
<span class="n">backend</span> <span class="o">=</span> <span class="n">qiskit</span><span class="o">.</span><span class="n">Aer</span><span class="o">.</span><span class="n">get_backend</span><span class="p">(</span><span class="s1">&#39;qasm_simulator&#39;</span><span class="p">)</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">qiskit</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">meas_calibs</span><span class="p">,</span> <span class="n">backend</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">noise_model</span><span class="o">=</span><span class="n">noise_model</span><span class="p">)</span>
<span class="n">cal_results</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">meas_fitter</span> <span class="o">=</span> <span class="n">TensoredMeasFitter</span><span class="p">(</span><span class="n">cal_results</span><span class="p">,</span> <span class="n">mit_pattern</span><span class="o">=</span><span class="n">mit_pattern</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Le fitter (ajusteur) fournit deux matrices d’étalonnage. Une matrice est pour le qubit 2, et l’autre matrice est pour les qubits 3 et 4.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="n">meas_fitter</span><span class="o">.</span><span class="n">cal_matrices</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
[array([[0.8987, 0.2454],
       [0.1013, 0.7546]]), array([[0.817 , 0.221 , 0.2272, 0.0606],
       [0.089 , 0.6802, 0.0212, 0.1904],
       [0.0834, 0.021 , 0.6798, 0.1866],
       [0.0106, 0.0778, 0.0718, 0.5624]])]
</pre></div></div>
</div>
<p>Nous pouvons observer les fidéliités de lecture des composants tensurés ou qubits individuels au sein d’un ensemble:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">#readout fidelity of Q2</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Readout fidelity of Q2: </span><span class="si">%f</span><span class="s1">&#39;</span><span class="o">%</span><span class="k">meas_fitter</span>.readout_fidelity(0))

<span class="c1">#readout fidelity of Q3/Q4</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Readout fidelity of Q3/4 space (e.g. mean assignment &#39;</span>
      <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">fidelity of 00,10,01 and 11): </span><span class="si">%f</span><span class="s1">&#39;</span><span class="o">%</span><span class="k">meas_fitter</span>.readout_fidelity(1))

<span class="c1">#readout fidelity of Q3</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Readout fidelity of Q3: </span><span class="si">%f</span><span class="s1">&#39;</span><span class="o">%</span><span class="k">meas_fitter</span>.readout_fidelity(1,[[&#39;00&#39;,&#39;10&#39;],[&#39;01&#39;,&#39;11&#39;]]))
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Readout fidelity of Q2: 0.826650
Readout fidelity of Q3/4 space (e.g. mean assignment
fidelity of 00,10,01 and 11): 0.684850
Readout fidelity of Q3: 0.829550
</pre></div></div>
</div>
<p>Tracer les matrices d’étalonnage individuelles :</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Plot the calibration matrix</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Q2 Calibration Matrix&#39;</span><span class="p">)</span>
<span class="n">meas_fitter</span><span class="o">.</span><span class="n">plot_calibration</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Q3/Q4 Calibration Matrix&#39;</span><span class="p">)</span>
<span class="n">meas_fitter</span><span class="o">.</span><span class="n">plot_calibration</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Q2 Calibration Matrix
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_noise_3_measurement_error_mitigation_48_1.png" src="../../_images/tutorials_noise_3_measurement_error_mitigation_48_1.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Q3/Q4 Calibration Matrix
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_noise_3_measurement_error_mitigation_48_3.png" src="../../_images/tutorials_noise_3_measurement_error_mitigation_48_3.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Make a 3Q GHZ state</span>
<span class="n">cr</span> <span class="o">=</span> <span class="n">ClassicalRegister</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">ghz</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="n">qr</span><span class="p">,</span> <span class="n">cr</span><span class="p">)</span>
<span class="n">ghz</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="n">qr</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
<span class="n">ghz</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="n">qr</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">qr</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<span class="n">ghz</span><span class="o">.</span><span class="n">cx</span><span class="p">(</span><span class="n">qr</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">qr</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>
<span class="n">ghz</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">qr</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">cr</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">ghz</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">qr</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="n">cr</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">ghz</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">qr</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span><span class="n">cr</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;qiskit.circuit.instructionset.InstructionSet at 0x7f869e0dc400&gt;
</pre></div></div>
</div>
<p>Nous exécutons maintenant les circuits d’étalonnage (avec le modèle de bruit ci-dessus):</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">job</span> <span class="o">=</span> <span class="n">qiskit</span><span class="o">.</span><span class="n">execute</span><span class="p">([</span><span class="n">ghz</span><span class="p">],</span> <span class="n">backend</span><span class="o">=</span><span class="n">backend</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">noise_model</span><span class="o">=</span><span class="n">noise_model</span><span class="p">)</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Results without mitigation</span>
<span class="n">raw_counts</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">get_counts</span><span class="p">()</span>

<span class="c1"># Get the filter object</span>
<span class="n">meas_filter</span> <span class="o">=</span> <span class="n">meas_fitter</span><span class="o">.</span><span class="n">filter</span>

<span class="c1"># Results with mitigation</span>
<span class="n">mitigated_results</span> <span class="o">=</span> <span class="n">meas_filter</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="n">mitigated_counts</span> <span class="o">=</span> <span class="n">mitigated_results</span><span class="o">.</span><span class="n">get_counts</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Tracer l’état brut par rapport à l’état corrigé:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">meas_filter</span> <span class="o">=</span> <span class="n">meas_fitter</span><span class="o">.</span><span class="n">filter</span>
<span class="n">mitigated_results</span> <span class="o">=</span> <span class="n">meas_filter</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="n">mitigated_counts</span> <span class="o">=</span> <span class="n">mitigated_results</span><span class="o">.</span><span class="n">get_counts</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">plot_histogram</span><span class="p">([</span><span class="n">raw_counts</span><span class="p">,</span> <span class="n">mitigated_counts</span><span class="p">],</span> <span class="n">legend</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;raw&#39;</span><span class="p">,</span> <span class="s1">&#39;mitigated&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_noise_3_measurement_error_mitigation_54_0.png" src="../../_images/tutorials_noise_3_measurement_error_mitigation_54_0.png" />
</div>
</div>
<p>En tant que vérification, nous devrions obtenir la même réponse si nous construisons la matrice de correction complète à partir d’un produit tensoriel des matrices de calibration de sous-espace:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">meas_calibs2</span><span class="p">,</span> <span class="n">state_labels2</span> <span class="o">=</span> <span class="n">complete_meas_cal</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="n">meas_fitter2</span> <span class="o">=</span> <span class="n">CompleteMeasFitter</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">state_labels2</span><span class="p">)</span>
<span class="n">meas_fitter2</span><span class="o">.</span><span class="n">cal_matrix</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">kron</span><span class="p">(</span><span class="n">meas_fitter</span><span class="o">.</span><span class="n">cal_matrices</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">meas_fitter</span><span class="o">.</span><span class="n">cal_matrices</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">meas_filter2</span> <span class="o">=</span> <span class="n">meas_fitter2</span><span class="o">.</span><span class="n">filter</span>
<span class="n">mitigated_results2</span> <span class="o">=</span> <span class="n">meas_filter2</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="n">mitigated_counts2</span> <span class="o">=</span> <span class="n">mitigated_results2</span><span class="o">.</span><span class="n">get_counts</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">plot_histogram</span><span class="p">([</span><span class="n">raw_counts</span><span class="p">,</span> <span class="n">mitigated_counts2</span><span class="p">],</span> <span class="n">legend</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;raw&#39;</span><span class="p">,</span> <span class="s1">&#39;mitigated&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_noise_3_measurement_error_mitigation_56_0.png" src="../../_images/tutorials_noise_3_measurement_error_mitigation_56_0.png" />
</div>
</div>
</section>
<section id="Exécuter-les-algorithmes-Qiskit-avec-l'atténuation-des-erreurs-de-mesure">
<h2>Exécuter les algorithmes Qiskit avec l’atténuation des erreurs de mesure<a class="headerlink" href="#Exécuter-les-algorithmes-Qiskit-avec-l'atténuation-des-erreurs-de-mesure" title="Lien permanent vers ce titre">¶</a></h2>
<p>Pour utiliser l’atténuation des erreurs de mesure lors de l’exécution de circuits quantiques dans le cadre d’un algorithme Qiskit, nous devons inclure l’instance appropriée d’ajustement des erreurs de mesure dans QuantumInstance. Cet objet contient également les spécifications du système d’execution choisi.</p>
<p>Dans ce qui suit, nous illustrons l’atténuation des erreurs de mesure avec les algorithmes Aqua sur l’exemple de la recherche de l’état fondamental d’un Hamiltonien avec VQE.</p>
<p>Tout d’abord, nous devons importer les bibliothèques qui fournissent les backends ainsi que les classes nécessaires à l’exécution de l’algorithme.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Import qiskit functions and libraries</span>
<span class="kn">from</span> <span class="nn">qiskit</span> <span class="kn">import</span> <span class="n">Aer</span><span class="p">,</span> <span class="n">IBMQ</span>
<span class="kn">from</span> <span class="nn">qiskit.circuit.library</span> <span class="kn">import</span> <span class="n">TwoLocal</span>
<span class="kn">from</span> <span class="nn">qiskit.utils</span> <span class="kn">import</span> <span class="n">QuantumInstance</span>
<span class="kn">from</span> <span class="nn">qiskit.algorithms</span> <span class="kn">import</span> <span class="n">VQE</span>
<span class="kn">from</span> <span class="nn">qiskit.algorithms.optimizers</span> <span class="kn">import</span> <span class="n">COBYLA</span>
<span class="kn">from</span> <span class="nn">qiskit.opflow</span> <span class="kn">import</span> <span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Z</span><span class="p">,</span> <span class="n">I</span><span class="p">,</span> <span class="n">CX</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="n">H</span><span class="p">,</span> <span class="n">S</span><span class="p">,</span> <span class="n">PrimitiveOp</span>
<span class="kn">from</span> <span class="nn">qiskit.providers.aer</span> <span class="kn">import</span> <span class="n">noise</span>

<span class="c1"># Import error mitigation functions</span>
<span class="kn">from</span> <span class="nn">qiskit.ignis.mitigation.measurement</span> <span class="kn">import</span> <span class="n">CompleteMeasFitter</span>
</pre></div>
</div>
</div>
<p>Ensuite, nous initialisons les instances requises pour exécuter l’algorithme.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Initialize Hamiltonian</span>
<span class="n">h_op</span> <span class="o">=</span>  <span class="p">(</span><span class="o">-</span><span class="mf">1.0523732</span> <span class="o">*</span> <span class="n">I</span><span class="o">^</span><span class="n">I</span><span class="p">)</span> <span class="o">+</span> \
                <span class="p">(</span><span class="mf">0.39793742</span> <span class="o">*</span> <span class="n">I</span><span class="o">^</span><span class="n">Z</span><span class="p">)</span> <span class="o">+</span> \
                <span class="p">(</span><span class="o">-</span><span class="mf">0.3979374</span> <span class="o">*</span> <span class="n">Z</span><span class="o">^</span><span class="n">I</span><span class="p">)</span> <span class="o">+</span> \
                <span class="p">(</span><span class="o">-</span><span class="mf">0.0112801</span> <span class="o">*</span> <span class="n">Z</span><span class="o">^</span><span class="n">Z</span><span class="p">)</span> <span class="o">+</span> \
                <span class="p">(</span><span class="mf">0.18093119</span> <span class="o">*</span> <span class="n">X</span><span class="o">^</span><span class="n">X</span><span class="p">)</span>
<span class="c1"># Initialize trial state</span>
<span class="n">ansatz</span> <span class="o">=</span> <span class="n">TwoLocal</span><span class="p">(</span><span class="n">h_op</span><span class="o">.</span><span class="n">num_qubits</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;ry&#39;</span><span class="p">,</span> <span class="s1">&#39;rz&#39;</span><span class="p">],</span> <span class="s1">&#39;cz&#39;</span><span class="p">,</span> <span class="n">reps</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">entanglement</span><span class="o">=</span><span class="s1">&#39;full&#39;</span><span class="p">)</span>
<span class="c1"># Initialize optimizer</span>
<span class="n">optimizer</span> <span class="o">=</span> <span class="n">COBYLA</span><span class="p">(</span><span class="n">maxiter</span><span class="o">=</span><span class="mi">350</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Ici, nous choisissons <code class="docutils literal notranslate"><span class="pre">qasm_simulateur</span></code> de Aer comme backend et nous ajoutons également un modèle de bruit personnalisé. L’application d’un backend quantique réel fourni par IBMQ est décrite dans le code commenté.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Generate a noise model</span>
<span class="n">noise_model</span> <span class="o">=</span> <span class="n">noise</span><span class="o">.</span><span class="n">NoiseModel</span><span class="p">()</span>
<span class="k">for</span> <span class="n">qi</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">h_op</span><span class="o">.</span><span class="n">num_qubits</span><span class="p">):</span>
    <span class="n">read_err</span> <span class="o">=</span> <span class="n">noise</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">readout_error</span><span class="o">.</span><span class="n">ReadoutError</span><span class="p">([[</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">],[</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.9</span><span class="p">]])</span>
    <span class="n">noise_model</span><span class="o">.</span><span class="n">add_readout_error</span><span class="p">(</span><span class="n">read_err</span><span class="p">,</span> <span class="p">[</span><span class="n">qi</span><span class="p">])</span>

<span class="c1"># Initialize the backend configuration using measurement error mitigation with a QuantumInstance</span>
<span class="n">qi_noise_model_qasm</span> <span class="o">=</span> <span class="n">QuantumInstance</span><span class="p">(</span><span class="n">backend</span><span class="o">=</span><span class="n">Aer</span><span class="o">.</span><span class="n">get_backend</span><span class="p">(</span><span class="s1">&#39;qasm_simulator&#39;</span><span class="p">),</span> <span class="n">noise_model</span><span class="o">=</span><span class="n">noise_model</span><span class="p">,</span> <span class="n">shots</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
                                      <span class="n">measurement_error_mitigation_cls</span><span class="o">=</span><span class="n">CompleteMeasFitter</span><span class="p">,</span>
                                      <span class="n">measurement_error_mitigation_shots</span><span class="o">=</span><span class="mi">1000</span><span class="p">)</span>

<span class="c1"># Intialize your TOKEN and provider with</span>
<span class="c1"># provider = IBMQ.get_provider(...)</span>
<span class="c1"># qi_noise_model_ibmq = QuantumInstance(backend=provider = provider.get_backend(backend_name)), shots=8000,</span>
<span class="c1">#                                       measurement_error_mitigation_cls=CompleteMeasFitter, measurement_error_mitigation_shots=8000)</span>
<span class="c1"># Initialize algorithm to find the ground state</span>
<span class="n">vqe</span> <span class="o">=</span> <span class="n">VQE</span><span class="p">(</span><span class="n">ansatz</span><span class="p">,</span> <span class="n">optimizer</span><span class="p">,</span> <span class="n">quantum_instance</span><span class="o">=</span><span class="n">qi_noise_model_qasm</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Enfin, nous pouvons exécuter l’algorithme et vérifier les résultats.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Run the algorithm</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">vqe</span><span class="o">.</span><span class="n">compute_minimum_eigenvalue</span><span class="p">(</span><span class="n">h_op</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
OrderedDict([   (&#39;aux_operator_eigenvalues&#39;, None),
                (&#39;cost_function_evals&#39;, 160),
                (   &#39;eigenstate&#39;,
                    {   &#39;00&#39;: 2.532691715202339e-08,
                        &#39;01&#39;: 0.9884921947468327,
                        &#39;10&#39;: 0.15127187750731722,
                        &#39;11&#39;: 1.794134990629246e-08}),
                (&#39;eigenvalue&#39;, -1.817164159899567),
                (   &#39;optimal_parameters&#39;,
                    {   ParameterVectorElement(θ[2]): -3.34732651765156,
                        ParameterVectorElement(θ[0]): -3.201489973566976,
                        ParameterVectorElement(θ[1]): 5.455385170164484,
                        ParameterVectorElement(θ[3]): -0.938265719615618,
                        ParameterVectorElement(θ[4]): -5.471138544110863,
                        ParameterVectorElement(θ[5]): -4.9333893335168195,
                        ParameterVectorElement(θ[6]): 4.719344901657608,
                        ParameterVectorElement(θ[7]): 3.5631628105813595,
                        ParameterVectorElement(θ[8]): 4.620029513196384,
                        ParameterVectorElement(θ[9]): 4.389733765915195,
                        ParameterVectorElement(θ[10]): 0.3579623685748273,
                        ParameterVectorElement(θ[11]): -1.8159430070692768,
                        ParameterVectorElement(θ[12]): 1.6631414475084603,
                        ParameterVectorElement(θ[13]): 5.912841569666883,
                        ParameterVectorElement(θ[14]): -0.8427472007692779,
                        ParameterVectorElement(θ[15]): -0.9682671272401369}),
                (   &#39;optimal_point&#39;,
                    array([-3.20148997,  0.35796237, -1.81594301,  1.66314145,  5.91284157,
       -0.8427472 , -0.96826713,  5.45538517, -3.34732652, -0.93826572,
       -5.47113854, -4.93338933,  4.7193449 ,  3.56316281,  4.62002951,
        4.38973377])),
                (&#39;optimal_value&#39;, -1.817164159899567),
                (&#39;optimizer_evals&#39;, 160),
                (&#39;optimizer_time&#39;, 2.658737897872925)])
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">qiskit.tools.jupyter</span>
<span class="o">%</span><span class="k">qiskit_version_table</span>
<span class="o">%</span><span class="k">qiskit_copyright</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<h3>Version Information</h3><table><tr><th>Qiskit Software</th><th>Version</th></tr><tr><td>Qiskit</td><td>None</td></tr><tr><td>Terra</td><td>0.17.0</td></tr><tr><td>Aer</td><td>0.8.0</td></tr><tr><td>Ignis</td><td>0.6.0</td></tr><tr><td>Aqua</td><td>None</td></tr><tr><td>IBM Q Provider</td><td>None</td></tr><tr><th>System information</th></tr><tr><td>Python</td><td>3.8.8 (default, Feb 24 2021, 13:46:16)
[Clang 10.0.0 ]</td></tr><tr><td>OS</td><td>Darwin</td></tr><tr><td>CPUs</td><td>2</td></tr><tr><td>Memory (Gb)</td><td>12.0</td></tr><tr><td colspan='2'>Wed Apr 07 10:50:57 2021 EDT</td></tr></table></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div style='width: 100%; background-color:#d5d9e0;padding-left: 10px; padding-bottom: 10px; padding-right: 10px; padding-top: 5px'><h3>This code is a part of Qiskit</h3><p>&copy; Copyright IBM 2017, 2021.</p><p>This code is licensed under the Apache License, Version 2.0. You may<br>obtain a copy of this license in the LICENSE.txt file in the root directory<br> of this source tree or at http://www.apache.org/licenses/LICENSE-2.0.<p>Any modifications or derivative works of this code must retain this<br>copyright notice, and modified files need to carry a notice indicating<br>that they have been altered from the originals.</p></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</section>
</section>


             </article>
             
            </div>
            <footer>
  

  

    <hr>

  

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, Qiskit Development Team.
      Mis à jour le 2021/07/09.

    </p>
  </div>
    
      <div>
        Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
      </div>
     

</footer>

          </div>
        </div>

        <div class="pytorch-content-right" id="pytorch-content-right">
          <div class="pytorch-right-menu" id="pytorch-right-menu">
            <div class="pytorch-side-scroll" id="pytorch-side-scroll-right">
              <ul>
<li><a class="reference internal" href="#">Atténuation des Erreurs de Mesure</a><ul>
<li><a class="reference internal" href="#Introduction">Introduction</a></li>
<li><a class="reference internal" href="#Exemple-des-Matrices-de-Calibration-pour-3-Qubits">Exemple des Matrices de Calibration pour 3 Qubits</a></li>
<li><a class="reference internal" href="#Génération-de-Circuits-d'Etalonnage-de-Mesure">Génération de Circuits d’Etalonnage de Mesure</a></li>
<li><a class="reference internal" href="#Calcul-de-la-Matrice-d'Etalonnage">Calcul de la Matrice d’Etalonnage</a></li>
<li><a class="reference internal" href="#Analyse-des-Résultats">Analyse des Résultats</a></li>
<li><a class="reference internal" href="#Application-de-l'Etalonnage">Application de l’Etalonnage</a></li>
<li><a class="reference internal" href="#Corriger-le-Bruit-de-Mesure-sur-un-Etat-GHZ-3Q">Corriger le Bruit de Mesure sur un Etat GHZ 3Q</a><ul>
<li><a class="reference internal" href="#Application-à-un-sous-ensemble-réduit-de-qubits">Application à un sous-ensemble réduit de qubits</a></li>
</ul>
</li>
<li><a class="reference internal" href="#Mitigation-tendue">Mitigation tendue</a></li>
<li><a class="reference internal" href="#Exécuter-les-algorithmes-Qiskit-avec-l'atténuation-des-erreurs-de-mesure">Exécuter les algorithmes Qiskit avec l’atténuation des erreurs de mesure</a></li>
</ul>
</li>
</ul>

            </div>
          </div>
        </div>
      </section>
    </div>

  

     
       <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
         <script src="../../_static/jquery.js"></script>
         <script src="../../_static/underscore.js"></script>
         <script src="../../_static/doctools.js"></script>
         <script src="../../_static/language_data.js"></script>
         <script src="../../_static/thebelab-helper.js"></script>
         <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
         <script src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^0.21.0-alpha.0/dist/embed-amd.js"></script>
         <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
         <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
         <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
     

  

  <script type="text/javascript" src="../../_static/js/vendor/popper.min.js"></script>
  <script type="text/javascript" src="../../_static/js/vendor/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

  <div>
    <br>
  </div>

  <!-- Begin Mobile Menu -->

  <div class="mobile-main-menu">
    <div class="container-fluid">
      <div class="container">
        <div class="mobile-main-menu-header-container">
          <a class="header-logo" href="https://qiskit.org/" aria-label="PyTorch"></a>
          <a class="main-menu-close-button" href="#" data-behavior="close-mobile-menu"></a>
        </div>
      </div>
    </div>

    <div class="mobile-main-menu-links-container">
      <div class="main-menu">
        <ul>
          <li>
            <a href="../../getting_started.html">Getting Started</a>
          </li>
          <li>
            <a href="../../tutorials.html">Tutorials</a>
          </li>
          <li>
            <a href="https://qiskit.org/documentation/partners/">Providers</a>
          </li>
          <br>
          <li class="resources-mobile-menu-title">
            Applications
          </li>
          <ul class="resources-mobile-menu-items">
            <li>
              <a href="https://qiskit.org/documentation/machine-learning/">Machine learning</a>
            </li>

            <li>
              <a href="https://qiskit.org/documentation/nature/">Nature</a>
            </li>

            <li>
              <a href="https://qiskit.org/documentation/finance/">Finance</a>
            </li>

            <li>
              <a href="https://qiskit.org/documentation/optimization/">Optimization</a>
            </li>
          </ul>

          <br>

          <li class="resources-mobile-menu-title">
            Resources
          </li>

          <ul class="resources-mobile-menu-items">
            <li>
              <a href="https://qiskit.slack.com">Slack support</a>
            </li>
          </ul>
          <br>
        </ul>
      </div>
    </div>
  </div>

  <!-- End Mobile Menu -->

  <script type="text/javascript" src="../../_static/js/vendor/anchor.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function() {
      mobileMenu.bind();
      mobileTOC.bind();
      pytorchAnchors.bind();
      sideMenus.bind();
      scrollToAnchor.bind();
      highlightNavigation.bind();
      mainMenuDropdown.bind();
      filterTags.bind();

      // Add class to links that have code blocks, since we cannot create links in code blocks
      $("article.pytorch-article a span.pre").each(function(e) {
        $(this).closest("a").addClass("has-code");
      });
    })
  </script>
</body>
</html>